<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shoplyer</title>
  <link rel="stylesheet" href="./css/reset.css">

  <link rel="stylesheet" href="./owlcarousel/owl.carousel.css">
  <link rel="stylesheet" href="./owlcarousel/owl.theme.default.css">
  <link rel="stylesheet" href="./css/custom.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="stylesheet" type="text/css" href="./slick/slick.css">
  <link rel="stylesheet" type="text/css" href="./slick/slick-theme.css">
  <script type="text/javascript" src="js/sweetalert.min.js"></script>

  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;1,100;1,300;1,400;1,500&display=swap"
    rel="stylesheet">
  <script src="https://kit.fontawesome.com/d9973f5636.js" crossorigin="anonymous"></script>

  <!--category javascript start-->
  <script type="text/javascript" src="./js/jquery-3.5.1.min.js"></script>
  <script>document.write('<script type="text/javascript" src="./js/basket.js?dev=' + Math.floor(Math.random() * 100) + '"\><\/script>');</script>
  <script>
    $(document).ready(function () {


      ProductFilter();
      CategoryFill();

    });


    function CategoryFill() {

      $.get("js/category.json", function (data) {
        var appendItem = $(".verticalNavigation ul");
        for (i = 0; i < data.length; i++) {
          var htmlItem = '<li class="categoryLi"><a  href="' + data[i].link + '">' + data[i].color + '<i class="fas fa-angle-double-right"></i></a></li>';
          $(appendItem).append(htmlItem);
        }
      });
    }
  </script>
  <!--category javascript done-->

  <!--products javascript start-->
  <script>
    function ProductFilter() {

      $.get("js/products.json", function (data) {

        var urlstring = window.location.href;
        var categoryParse = urlstring.substr(urlstring.indexOf("=") + 1, 1);
        var appendItem = $(".ShopItemsContainer");



        if (urlstring.indexOf("category") != -1) {

          for (i = 0; i < data.length; i++) {
            if (data[i].category_id == categoryParse) {
              
              var imageArr = data[i].image.split(",");
              var htmlItemOldie = '<div class="ShopItems" ><div class="ShopItem" data-title="' + data[i].id + '" style="background: url(' + imageArr[0] +
                ');background-size:150px 200px;"></div> ' + data[i].title + ' <p><b><i>' + data[i].price +
                ' TL</i></b></p><div class="addBasket"  data-title="' + data[i].id + '"><i class="fas fa-shopping-cart"></i> Add to Cart</div></div>';

                var htmlItem=`
        <div class="ShopItems">
          <div class="ShopItem" data-title="${data[i].id}">

            <div class="owl-carousel owl-1 owl-theme">
              <div class="item"><img class="ProductOwlImg" src="${imageArr[0]}"> </div>
              <div class="item"><img class="ProductOwlImg" src="${imageArr[1]}"> </div>
              <div class="item"><img class="ProductOwlImg" src="${imageArr[2]}"></div>
            </div>
        </div>
          ${data[i].title} <p><b><i>${data[i].price}TL</i></b></p>
          <div class="addBasket"  data-title="${data[i].id}" ><i class="fas fa-shopping-cart" aria-hidden="true"></i> Add to Cart
          </div>
        </div>

        `;
              $(appendItem).append(htmlItem);
              owlLoader();
            }
          }
        } /* Search */
        else if ((urlstring.indexOf("search") != -1)) {
          var brandParse = urlstring.substr(urlstring.indexOf("=") + 1);

          $('.slider').empty();
          $('.BrandNav').append(brandParse + ' aramasının sonuçları');
          $('.BrandNav').css("display", "block");

          var regex = new RegExp(brandParse, "i");
          
         filteredSearch = data.filter(x => x.brand.match(regex) || x.product_code.match(regex) || x.title.match(regex));

          var htmlitemsum = "";

          $.each(filteredSearch, function (index, value) {
            var imageArr = value.image.split(",");
            

            htmlitemsum +=`
        <div class="ShopItems">
          <div class="ShopItem" data-title="${value.id}">

            <div class="owl-carousel owl-1 owl-theme">
              <div class="item"><img class="ProductOwlImg" src="${imageArr[0]}"> </div>
              <div class="item"><img class="ProductOwlImg" src="${imageArr[1]}"> </div>
              <div class="item"><img class="ProductOwlImg" src="${imageArr[2]}"></div>
            </div>
        </div>
          ${value.title} <p><b><i>${value.price}TL</i></b></p>
          <div class="addBasket"  data-title="${value.id}" ><i class="fas fa-shopping-cart" aria-hidden="true"></i> Add to Cart
          </div>
        </div>

        `;
     
          });

          

          $(htmlitemsum).appendTo(appendItem);
          owlLoader();




        }
        else if ((urlstring.indexOf("brand") != -1)) {
          var brandParse = urlstring.substr(urlstring.indexOf("=") + 1);
          $('.slider').empty();
          $('.BrandNav').append(brandParse + ' Markasına Ait Ürünler');
          $('.BrandNav').css("display", "block");

          for (i = 0; i < data.length; i++) {
            if (data[i].brand == brandParse) {
              var imageArr = data[i].image.split(",");
              var htmlItem=`
        <div class="ShopItems">
          <div class="ShopItem" data-title="${data[i].id}">

            <div class="owl-carousel owl-1 owl-theme">
              <div class="item"><img class="ProductOwlImg" src="${imageArr[0]}"> </div>
              <div class="item"><img class="ProductOwlImg" src="${imageArr[1]}"> </div>
              <div class="item"><img class="ProductOwlImg" src="${imageArr[2]}"></div>
            </div>
        </div>
          ${data[i].title} <p><b><i>${data[i].price}TL</i></b></p>
          <div class="addBasket"  data-title="${data[i].id}" ><i class="fas fa-shopping-cart" aria-hidden="true"></i> Add to Cart
          </div>
        </div>

        `;
              $(appendItem).append(htmlItem);
              owlLoader();
            }
          }
        }
        else {

          for (i = 0; i < data.length; i++) {
            var imageArr = data[i].image.split(",");

            var htmlItem=`
        <div class="ShopItems" data-title="${data[i].id}">
          <div class="ShopItem" data-title="${data[i].id}">

            <div class="owl-carousel owl-1 owl-theme" data-title="${data[i].id}">
              <div class="item" ><img class="ProductOwlImg" data-title="${data[i].id}" src="${imageArr[0]}"> </div>
              <div class="item" ><img class="ProductOwlImg" data-title="${data[i].id}" src="${imageArr[1]}"> </div>
              <div class="item" ><img class="ProductOwlImg" data-title="${data[i].id}" src="${imageArr[2]}"></div>
            </div>
        </div>
          ${data[i].title} <p><b><i>${data[i].price}TL</i></b></p>
          <div class="addBasket"  data-title="${data[i].id}" ><i class="fas fa-shopping-cart" aria-hidden="true"></i> Add to Cart
          </div>
        </div>

        `;
            $(appendItem).append(htmlItem);
            owlLoader();


          }



        }

      });
    }

    $(document).on("click", ".addBasket", function () {
      var selectedItem = $(this).data('title');

      $.get("./js/products.json", function (data) {

        AddBasket(data[selectedItem - 1]);
        swal("İşlem Başarılı!", "Ürün sepete eklendi!", "success");
        NotBarFill();



      });

    })


    $(document).on("click", ".owl-carousel :not(.owl-dots)", function (e) {
      //var selectedItem = $(this).data('title');
      var selectedItem = $(this).parent().data('title');
    
      /*
      
      $(".server").on('click', ':not(.delete-server)', function (e) {
           e.stopPropagation()
           // Show edit dialog
      });*/

      //if ((state != 10) && (state != 15)
      if (($(e.target).is('span')) || ($(e.target).is('button'))) {


      } else {
      
       
        window.location.href = './productDetail.html?ProductId=' + selectedItem + '';
      }






    });
  </script>
  <!--products javascript done-->

  <script src="./owlcarousel/owl.carousel.js"></script>

</head>

<body>
  <!---->



  <!---->
  <script>
    function runn() {
      localStorage.clear();
    }
  </script>
  <div class="headerCont">
    <span class="logo"><a href="./index.html">Shoplyer</a></span>

    <ul>
      <li><a href="./index.html" class="inn">Anasayfa</a></li>
      <li><a class="LoginCont" href="./profile.html">Hesabım</a>
        <ul id="loginUl" class="loginUl">
          <li class="loginLi"><a href="./login.html">Giriş Yap</a></li>
          <li class="loginLi"><a href="./register.html">Kayıt Ol</a></li>
        </ul>
      </li>
      <script>
        $(document).ready(function () {
          $(".LoginCont").mouseover(function () {
            $(".loginLi").addClass("displaytest");
            setTimeout(function () { $(".loginLi").removeClass("displaytest"); }, 3000);

          });





        });
      </script>

      <li><a href="./basket.html">Sepetim</a>
        <span class="NotBarContainer"></span>

      </li>

    </ul>

  </div>

  <script>



    NotBarFill();

    function NotBarFill() {
      var NotInt;
      NotInt = NotBarUpdater();
      htmlitem = `<span class="NotBar" id="hi">${NotInt}</span>`;
      var AppendSelector = $(".NotBarContainer");
      $(AppendSelector).empty();

      if (NotInt > 0) {


        $(htmlitem).appendTo('.NotBarContainer');
        $(".NotBar").addClass('flash');
        setTimeout(function () {
          $('.NotBar').removeClass('flash');
        }, 1000);
      }
      else {

      }

    }

  </script>

  <div class="pageContainer">
    <div class="verticalNavigation">
      <ul>
        <li class="MenuButton"><span class="checkboxicon">Kategoriler</span><i class="fas fa-bars checkboxicon "></i>
        </li>
        <script>
          flag = 0;
          $(document).ready(function () {
            $(".checkboxicon").click(function () {


              //var beverage = (age >= 21) ? "Beer" : "Juice"; 


              if (flag == 0) {
                //alert("1");
                flag = 1;
                $(".verticalNavigation ul .categoryLi").css("display", "flow-root");
              }
              else if (flag == 1) {

                flag = 0;
                $(".verticalNavigation ul .categoryLi").css("display", "none");
              }

            });

          });
        </script>
        <!--  
Data come from below section as javascript / json
      <li><a href="#news">Diğer Kategoriler<i class="fas fa-angle-double-right"></i></a></li>-->

      </ul>
    </div>

    <div class="content">
      <hr class="hrline">
      <h1 class="BrandNav"></h1>


      <!--Slick Slider Carousel Start-->
      <!-- <script src="https://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script> slinck js kaldırılcak
      <script src="./slick/slick.js" type="text/javascript" charset="utf-8"></script>-->
      <script src="./js/index.js" type="text/javascript" charset="utf-8"></script>
      <script src="./js/session.js" type="text/javascript" charset="utf-8"></script>
      <script src="./js/keyConstants.js" type="text/javascript" charset="utf-8"></script>





      <div class="ShopItemsContainer">

  
        
 

              
  
   





      </div>





      <!--  
          data come from above section-js
     
        '<div class="ShopItems"><div class="ShopItem" style="background: url(' + data[i].image +
            ');background-size:150px 200px;"></div> ' + data[i].title + ' <p><b><i>' + data[i].price +
            'TL</i></b></p><div class="addBasket"><i class="fas fa-shopping-cart"></i> Sepete Ekle</div></div>';
          $(appendItem).append(htmlItem);
        
            function teest(getitem){var getitem=data[i];
          console.log(getitem);
  }
          
        
        -->
    </div>
  </div>


  </div>



  <!----->


  <!--background-size:150px 200px;-->





  <br>

  <script>
        owlLoader();
        function owlLoader(){
          
    var owl = $('.owl-1');
   owl.owlCarousel({
       loop:true,
       touchDrag  : true,
        mouseDrag  : true,
       margin:10,
       rewind:true,
     items:1,
   });
   /*

   owl.on('mousewheel', '.owl-stage', function (e) {
  console.warn(e);
       if (e.deltaY>0) {
  
        $(e.target).trigger('next.owl');
        
        
          
       } else {
        $(e.target).trigger('prev.owl');
       }
       $(e.target).preventDefault();
   }); */

        }
   
   /*
    var i;
    for (i = 1; i < 2 + 1; i++) {


      $('.owl-' + i + '').owlCarousel({
        loop: true,
        touchDrag: true,
        mouseDrag: true,
        margin: 10,
        rewind: true,
        items: 1,
      });

      $('.owl-' + i + '').on('mousewheel', '.owl-stage', function (e) {
        if (e.deltaY > 0) {
          $('.owl-' + i + '').trigger('next.owl');
        } else {
          $('.owl-' + i + '').trigger('prev.owl');
        }
        e.preventDefault();
      });
     

    } */

    /*
    var owl = $('.owl-1');
   owl.owlCarousel({
       loop:true,
       touchDrag  : true,
        mouseDrag  : true,
       margin:10,
       rewind:true,
     items:1,
   });
   owl.on('mousewheel', '.owl-stage', function (e) {
       if (e.deltaY>0) {
           owl.trigger('next.owl');
       } else {
           owl.trigger('prev.owl');
       }
       e.preventDefault();
   });
   
   
   var owl2 = $('.owl-2');
   owl2.owlCarousel({
       loop:true,
       touchDrag  : true,
        mouseDrag  : true,
       margin:10,
       rewind:true,
     items:1,
   });
   owl2.on('mousewheel', '.owl-stage', function (e) {
       if (e.deltaY>0) {
           owl2.trigger('next.owl');
       } else {
           owl2.trigger('prev.owl');
       }
       e.preventDefault();
   });*/
    /*
    var owl2 = $('.owl-2');
    owl2.owlCarousel({
        loop:true,
        touchDrag  : true,
         mouseDrag  : true,
        margin:10,
        rewind:true,
      items:1,
    });
    owl2.on('mousewheel', '.owl-stage', function (e) {
        if (e.deltaY>0) {
            owl2.trigger('next.owl');
        } else {
            owl2.trigger('prev.owl');
        }
        e.preventDefault();
    });*/








  </script>

</body>

</html>